<div id="d3-bar-plays">
	<d3-bar-plays data='data' on-click="showSongs(play)"></d3-bar-plays>
</div>
<div class="btn-group btn-group-justified">
	<div class="btn btn-default" ng-repeat="rank in ranks" ng-class="{active: rank.active}" ng-click="toggle($index)">
		{{rank.name}}
	</div>
	<div class="btn btn-default" ng-show="allVisible" ng-click="setAll(false)">clear</div>
	<div class="btn btn-default" ng-hide="allVisible" ng-click="setAll(true)">see all</div>
</div>
<div ng-show="tiers" ng-hide="selectedPlayCount">
	<div ng-repeat="tier in tiers">
		Tier {{$index + 1}}: {{tier.count}} (avg. {{tier.sum / tier.count | number:2}})
	</div>
	<div>Total {{total.count}} (avg. {{total.sum / total.count | number:2}})</div>
</div>
<h1 ng-show="selectedPlayCount">
	{{songs.length | numSongsWithPlay}} with {{selectedPlayCount}} plays
</h1>
<table class="table table-hover" ng-show="songs.length">
	<tr ng-repeat="song in songs">
		<td>
			{{$index + 1}}
		</td>
		<td>
			{{song.lastPlayed | date: 'yy/MM/dd' }}
		</td>
		<td class="td-img-list">
			<img src="/{{song.albumId}}.30px.jpg" class="img-rounded img-album-up-list">
		</td>
		<td>
			<div class="recent-artists">
				<span class="recent-artist-list">
					<artist-array array="song.songArtists"></artist-array>
				</span>
			</div>
		</td>
		<td>
			{{song.title | normalizeString}}
			<span class="pull-right song-desc-right">
				<rank-badge rank="song.rank.billboard" prefix="'US'"></rank-badge>
				<rank-badge rank="song.rank.oricon" prefix="'ã‚ª'"></rank-badge>
				<rank-badge rank="song.rank.deutsche" prefix="'D'"></rank-badge>
				<rank-badge rank="song.rank.uk" prefix="'UK'"></rank-badge>
				<rank-badge rank="song.rank.francais" prefix="'F'"></rank-badge>
				<rank-badge rank="song.rank.melon" prefix="'M'"></rank-badge>
				<rank-badge rank="song.rank.gaon" prefix="'G'"></rank-badge>
				<span class="badge badge-plays" ng-show="{{song.plays}}">{{song.plays}}</span>
			</span>
		</td>
	</tr>
</table>
